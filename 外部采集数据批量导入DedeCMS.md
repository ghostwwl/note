翻出来的 当时是外部数据python批量插入 dedecms 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<META NAME="generator" CONTENT="http://txt2tags.sf.net">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=GBK">
</HEAD><BODY BGCOLOR="white" TEXT="black">
<P ALIGN="center"><CENTER><H1>外部采集数据批量导入DedeCMS说明</H1>
<FONT SIZE="4">
<I>author:ghostwwl</I><BR>
</FONT></CENTER>

<H3>外部采集数据批量导入DedeCMS说明</H3>
<UL>
<LI>相关的主要表说明
 <OL>
 <LI>文章相关表
  <UL>
  <LI>前缀_arctiny表
   <UL>
   <LI>其实文章添加到下面两张表就可以看到文章 但是DedeCMS的后台可能会看到频道的文章数据为0所以这个表必须添加
   </UL>
  <LI>前缀_archives表
   <UL>
   <LI>文章信息表 文章的点击 日期 作者 标题等一些常用字段
   </UL>
  <LI>前缀_addonarticle表(如果是自己新建的模型 则是创建的模型的子表)
   <UL>
   <LI>文章子表 保存文章内容和其他的一些扩展属性
   <P></P>
   </UL>
  </UL>
 <LI>TAG相关表
  <UL>
  <LI>前缀_tagindex表
   <UL>
   <LI>tag索引表 每一个新的tag词必须如此表注册 这里包括tag 包含tag的文章数目 以及按月 按星期等的统计数据
   </UL>
  <LI>前缀_taglist表
   <UL>
   <LI>详细记录每篇文章的tag情况 一个文章可以有多个tag是以tagid(上面表的id)和文章id为主键
   </UL>
  </UL>
 </OL>
</UL>

<UL>
<LI>向DedeCMS里面导入文章流程(我们假设是一条数据)
 <UL>
 <LI>添加文章数据
  <OL>
  <LI>向【前缀_arctiny】表添加数据 只需要添加三个字段(id, typeid, channel)这三个字段
  <LI>向【前缀_archives】表添加数据 (id, typeid, channel, title, source, click, keywords, pubdate, senddate,parent_id, litpic。。。。)尽量补全
  <LI>向【前缀_addonarticle或新建模式的子表】表添加数据 一般字段比较大的 archives里不全的其他文件属性 都放入这个表 如果原来的表不够用 不要随便添加字段 一定要新建模式 然后这里就是模式子表了
  <LI>其中要保证一条数据同时添加到三张表中 三张表的主键id, id, 和aid必须相同， 通常的做法是直接使用外部要导入的采集的数据id 但是必须保证唯一
  <P></P>
  </OL>
 <LI>添加TAG数据
  <OL>
  <LI>注意tag长度数据库中他的长度是char(12)
  <LI>查找表【前缀_tagindex】 select id from g_tagindex where tag=%s
   <UL>
   <LI>如果有我们记住这个tagid
   <LI>如果没有 我们添加tag到这张表insert into g_tagindex(tag, typeid, addtime) values(%s,%s,%s) 里面的addtime为python里的int(time.time()) 并且查找出tagid
   </UL>
  <LI>向【前缀_taglist】表添加数据insert into g_taglist(tid, aid, typeid, tag) values(%s,%s,%s,%s) 此表一tid,aid为主键 这里的tid就是上一步中的tagid
  <LI>更新【前缀_tagindex】表的统计字段update g_tagindex set total = total + 1 where id=%s 这里的id就是前面的tagid
  </OL>
 </UL>
</UL>


<!-- html code generated by txt2tags 2.5 (http://txt2tags.sf.net) -->
<!-- cmdline: txt2tags -t html /data1/dedecms.txt -->
</BODY></HTML>
